# تحسين حجم الحزمة

## نظرة عامة

يحتوي هذا المشروع على تحسينات لتقليل حجم الحزمة وتحسين أداء التطبيق من خلال:

1. إزالة الاعتماديات غير المستخدمة أو المكررة
2. تحسين تقسيم الكود (Code Splitting)
3. تحسين إعدادات Webpack
4. تحسين استيراد المكتبات

## التغييرات الرئيسية

### 1. تحسين ملف next.config.ts

تم تحسين ملف الإعدادات من خلال:

- إضافة المزيد من المكتبات إلى `optimizePackageImports` لتحسين استيرادها
- تحسين تقسيم الكود مع إعدادات متقدمة لـ `splitChunks`
- استبعاد الحزم الخاصة بالخادم فقط من حزمة العميل
- تحسين أداء التخزين المؤقت
- تعطيل خرائط المصدر في الإنتاج لتقليل الحجم
- إضافة إعدادات `modularizeImports` لتحسين استيراد المكتبات الكبيرة مثل lucide-react و Radix UI

### 2. تحسين ملف package.json

تم تحسين ملف الاعتماديات من خلال:

- إزالة `bcryptjs` المكرر (تم الاحتفاظ بـ `bcrypt` فقط)
- إزالة `critters` غير المستخدم
- إزالة `ua-parser-js` غير المستخدم
- إزالة `redis` من الاعتماديات الرئيسية (سيتم استخدامه فقط في جانب الخادم)
- إزالة `@next-auth/prisma-adapter` و `next-auth` غير المستخدمين
- إزالة `openai` غير المستخدم في العميل
- إضافة سكريبت `analyze` لتحليل الحزمة

## كيفية تطبيق التحسينات

1. استبدل ملف `next.config.ts` الحالي بملف `next.config.optimized.ts`
2. استبدل ملف `package.json` الحالي بملف `package.optimized.json`
3. قم بتثبيت الاعتماديات مرة أخرى:
   ```bash
   npm install
   ```
4. قم ببناء المشروع:
   ```bash
   npm run build
   ```

## تحليل الحزمة

لتحليل الحزمة بعد التحسينات، يمكنك تشغيل:
```bash
npm run analyze
```

هذا سينشئ تقريرًا مرئيًا لحجم الحزمة ومحتوياتها.

## النتائج المتوقعة

بعد تطبيق هذه التحسينات، يجب أن تشاهد:

- تقليل حجم حزمة JavaScript الرئيسية
- تحسين أداء التحميل الأولي للصفحة
- تحسين أداء التخزين المؤقت
- تقسيم أفضل للكود بين الصفحات والمكونات
